LOCAL_WEBSCHEMBLY_RUNTIME := ../webschembly-runtime/webschembly_runtime.wasm
WEBSCHEMBLY_RUNTIME ?= $(LOCAL_WEBSCHEMBLY_RUNTIME)

.PHONY: build
build: $(WEBSCHEMBLY_RUNTIME)
	WEBSCHEMBLY_RUNTIME=$(WEBSCHEMBLY_RUNTIME) npm run build

.PHONY: dev
dev: $(WEBSCHEMBLY_RUNTIME)
	WEBSCHEMBLY_RUNTIME=$(WEBSCHEMBLY_RUNTIME) npm run dev

.PHONY: $(LOCAL_WEBSCHEMBLY_RUNTIME)
$(LOCAL_WEBSCHEMBLY_RUNTIME):
	$(MAKE) -C ../webschembly-runtime

